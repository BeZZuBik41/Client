<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd"
      autoReload="true"
      throwExceptions="true"
      internalLogLevel="Off" internalLogFile="c:\temp\nlog-internal.log">

	<variable name="clientId" value="undefined"/>
	<variable name="gameVersion" value="undefined"/>
	<variable name="filenamePrefix"  value="Logs/log_${var:clientId}/${var:clientId}"/>
	<variable name="layoutWithException" value="${date:format=yyyy-MM-dd HH\:mm\:ss.fff zzz}|${var:gameVersion}|${level}|${logger}|${message}|${all-event-properties:separator=|} ${onexception:${newline}EXCEPTION\: ${exception:format=tostring}}"/>
	<variable name="simpleLayout" value="${date:format=yyyy-MM-dd HH\:mm\:ss.fff zzz}|${level}|${logger}|${message}|${all-event-properties:separator=|}"/>

	<targets>
		<target name="errorfile" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} errors.log"
				archiveFileName="${var:filenamePrefix} errors.{#####}.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="traceFile" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} traces.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="animation-debug" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} animation-debug.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="player-debug" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} player-debug.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="PoolFile" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} PoolFile.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="aiFile" xsi:type="File"
				layout="${layoutWithException}"
				deleteOldFileOnStartup="false"
				enableFileDelete ="false"
				concurrentWrites="false"
				fileName="${var:filenamePrefix} ai.log"
				keepFileOpen="true" />
		<target name="resourcesOperations" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} resourcesOperations.log"
				archiveFileName="${var:filenamePrefix} resourcesOperations.{#####}.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="applicationFile" xsi:type="File"
				layout="${layoutWithException}"
				deleteOldFileOnStartup="false"
				enableFileDelete ="false"
				concurrentWrites="false"
				fileName="${var:filenamePrefix} application.log"
				keepFileOpen="true" />
		<target name="anticheat" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} anticheat.log"
				concurrentWrites="false"
				keepFileOpen="true"/>
		<target name="nvidia" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} nvidia.log"
				concurrentWrites="false"
				keepFileOpen="true"/>
		<target name="net-simulation-app-target" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} net-simulation-app.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="exfiltration" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} exfiltration.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="inventory" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} inventory.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="backend_queue" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} backend_queue.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="fps" xsi:type="File"
				layout="${simpleLayout}"
				fileName="${var:filenamePrefix} fps.log"
				keepFileOpen="true"
				archiveFileName="${var:filenamePrefix} fps.{#####}.log"
				archiveAboveSize="524288"
				archiveNumbering="Sequence"
				deleteOldFileOnStartup="true"
				concurrentWrites="false"/>
		<target name="localization" xsi:type="File"
				layout="${simpleLayout}"
				fileName="${var:filenamePrefix} localization.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="pools" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} pools.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="surprisesFile" xsi:type="File"
				layout="${layoutWithException}"
				fileName="${var:filenamePrefix} surprises.log"
				archiveFileName="${var:filenamePrefix} surprises.{#####}.log"
				concurrentWrites="false"
				keepFileOpen="true" />
		<target name="EmuLib" xsi:type="EmuLibTarget" />
	</targets>

	<!-- Logging levels:
    Fatal
    Error
    Warn
    Info
    Debug
    Trace
  -->

	<rules>
		<logger name="*" minlevel="Error" writeTo="errorfile, traceFile" />
		<logger name="Export" writeTo="traceFile" />
		<logger name="*" minlevel="Debug" writeTo="EmuLib" />
		<logger name="ai" minlevel="Off" writeTo="aiFile" />
		<logger name="anticheat" minlevel="Error" writeTo="anticheat" />
		<logger name="application" minlevel="Debug" writeTo="applicationFile, traceFile" />
		<logger name="assets" minlevel="Error" writeTo="resourcesOperations, traceFile" />
		<logger name="backend" minlevel="Info" writeTo="traceFile" />
		<logger name="backend_queue" minlevel="Debug" writeTo="backend_queue" />
		<logger name="exfiltration" minlevel="Info" writeTo="traceFile" />
		<logger name="insurance" minlevel="Warn" writeTo="traceFile" />
		<logger name="inventory" minlevel="Info" writeTo="inventory, traceFile" />
		<logger name="nvidia" minlevel="Debug" writeTo="nvidia, traceFile" />
		<logger name="objectPool" minlevel="Error" writeTo="pools, traceFile" />
		<logger name="ping" minlevel="Off" writeTo="traceFile" />
		<logger name="player" minlevel="Off" writeTo="player-debug" />
		<logger name="scenes" minlevel="Off" writeTo="resourcesOperations, traceFile" />
		<logger name="screen" minlevel="Off" writeTo="traceFile" />
		<logger name="fps" minlevel="Warn" writeTo="fps, traceFile" />
		<logger name="ui_sounds" minlevel="Error" writeTo="traceFile" />
		<logger name="localization" minlevel="Off" writeTo="localization" />
		<logger name="surprises" minlevel="Error" writeTo="surprisesFile, errorfile" final="true"/>

		<!-- ANIMATION DEBUGGING -->
		<logger name="hands-states" minlevel="Trace" writeTo="animation-debug" final="true" enabled="false"/>
		<logger name="anim-events-emitter" minlevel="Trace" writeTo="animation-debug" final="true" enabled="false"/>
		<logger name="anim-events-container" minlevel="Debug" writeTo="animation-debug" final="true" enabled="false"/>
		<logger name="animEvents" minlevel="Trace" writeTo="animation-debug" final="true" enabled="false"/>
		<logger name="fast-animator-controller" minlevel="Error" writeTo="animation-debug, traceFile" final="true" enabled="true"/>
		<!-- =================== -->

		<!-- NET SIMULATOR DEBUGGING -->
		<logger name="net-simulation-app-logger" minlevel="Trace" writeTo="net-simulation-app-target" final="false" enabled="true"/>
	</rules>
</nlog>
